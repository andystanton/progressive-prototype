html
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    title!= title
    link(href='/bower_components/bootstrap/dist/css/bootstrap.min.css', rel='stylesheet')
    script(src='/bower_components/angular/angular.min.js')
    script(src='/bower_components/jquery/dist/jquery.min.js')
    script(src='/bower_components/bootstrap/dist/js/bootstrap.min.js')
    script(src='/socket.io/socket.io.js')
    script(src='/indexcontroller.js')
  body
    h1!= title
    div(ng-app='myApp', ng-controller='posts', ng-init='newPost()')
      div(class='row')
        div(class='col-md-4')
          div(id='editOptions')
            h4
              | {{ mode == 'edit' ? 'Edit Post' : 'Create Post' }}  
            p
              | Title:
            input(type='text', ng-model='editpost.title')
            p
              | Content:
            input(type='textarea', ng-model='editpost.content')
            br
            br
            input(type='button', value='Save Draft', ng-click="savePost(editpost)", ng-if="mode == 'new'")
            input(type='button', value='Update', ng-click="savePost(editpost)", ng-if="mode == 'edit'")
            input(type='button', value='Delete', ng-click="deletePost(editpost)", ng-if="mode == 'edit'")
            input(type='button', value='Publish', ng-click="publishPost(editpost)", ng-if="editpost.state == 'draft'")
            input(type='button', value='Withdraw', ng-click="withdrawPost(editpost)", ng-if="editpost.state == 'published'")
            br
            br
            input(type='button', value='New post', ng-click="newPost()")
        div(class='col-md-4')
          h4
            | Drafts
          ul
            li(ng-repeat='x in postModel.drafts.offline', ng-click="selectPost(x)")
              | {{ x.title }}
            li(ng-repeat='x in postModel.drafts.online', ng-click="selectPost(x)")
              | {{ x.title }}
        div(class='col-md-4')
          h4
            | Published
          ul
            li(ng-repeat='x in postModel.posts.offline', ng-click="selectPost(x)")
              | {{ x.title }}
            li(ng-repeat='x in postModel.posts.online', ng-click="selectPost(x)")
              | {{ x.title }}
